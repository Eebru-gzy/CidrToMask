pipeline {
    agent any
    tools {nodejs "NodeJs"}
    stages {
      stage('Starting') {
        steps {
          sh '''
              rm -r folder*
              rm -r workin*
              '''
        }
      }
      stage('Clone Repo') {
        steps{
          git credentialsId: 'f00ff383-c25e-4332-8f82-0a153badb25a', url: 'git@github.com:wizeline/wizeline-sre-opeyemi-alao.git'
        }
      }
      stage('Install dependencies') {
        steps {
          dir("cidr_convert_api/node") {
            sh "pwd"
            sh 'npm install'
          }
        }
      }
      stage('Test') {
        steps {
          dir("cidr_convert_api/node") {
            sh 'npm test'
          }
        }
      } 
    }
}
